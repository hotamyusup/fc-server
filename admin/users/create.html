<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Fire Cloud Admin</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	<link rel="stylesheet" href="/admin/css/vendor.css">
	<link rel="stylesheet" href="/admin/css/app.css">
	<script>
		var themeSettings = (localStorage.getItem('themeSettings')) ? JSON.parse(localStorage.getItem('themeSettings')) :
            {};
		var themeName = themeSettings.themeName || 'red';
		if (themeName) {
			document.write('<link rel="stylesheet" id="theme-style" href="/admin/css/app-' + themeName + '.css">');
		}
		else {
			document.write('<link rel="stylesheet" id="theme-style" href="/admin/css/app.css">');
		}
	</script>
</head>
<body>
	<div class="main-wrapper">
		<div class="app" id="app">
		<header class="header">
				<div class="header-block header-block-collapse d-lg-none d-xl-none">
					<button class="collapse-btn" id="sidebar-collapse-btn">
						<i class="fa fa-bars"></i>
					</button>
				</div>
				<div class="header-block header-block-search"></div>
				<div class="header-block header-block-buttons"></div>
				<div class="header-block header-block-nav"></div>
			</header>
			<aside class="sidebar">
				<div class="sidebar-container">
					<div class="sidebar-header">
						<div class="brand">Fire Cloud Admin</div>
					</div>
					<nav class="menu">
						<ul class="sidebar-menu metismenu" id="sidebar-menu">
							<li>
								<a href="/admin/properties">
									<i class="fa fa-th-large"></i> Properties
								</a>
							</li>
							<li class="active">
								<a href="/admin/users">
									<i class="fa fa-users"></i> Users
								</a>
							</li>
							<li>
								<a href="/admin/organizations">
									<i class="fa fa-dot-circle-o"></i> Organizations
								</a>
							</li>
							<li>
								<a href="/admin/equipments">
									<i class="fa fa-lightbulb-o"></i> Equipments
								</a>
							</li>
							<li>
								<a href="/admin/constructiontypes">
									<i class="fa fa-building-o"></i> Construction Types
								</a>
							</li>
							<li>
								<a href="/admin/occupancytypes">
									<i class="fa fa-home"></i> Occupancy Types
								</a>
							</li>
							<li>
								<a href="/admin/logout.html">
									<i class="fa fa-lock"></i> Log out
								</a>
							</li>
						</ul>
					</nav>
				</div>
			</aside>
			<div class="sidebar-overlay" id="sidebar-overlay"></div>
			<div class="sidebar-mobile-menu-handle" id="sidebar-mobile-menu-handle"></div>
			<div class="mobile-menu-handle"></div>
			<article class="content dashboard-page">
				<section id="userform">
					<div class="card card-block sameheight-item" style="height: 708px;">
						<div class="title-block">
							<h3 class="title">Create User</h3>
						</div>
						<form role="form" id="form">
							<div class="form-group">
								<label class="control-label">Fullname</label>
								<input type="text" id="title" name="Title" class="form-control underlined required">
							</div>
							<div class="form-group">
								<label class="control-label">Email</label>
								<input type="email" id="email" name="Email" class="form-control underlined required email">
							</div>
							<div class="form-group">
								<label class="control-label">Phone</label>
								<input type="tel" id="phone" name="Phone" class="form-control underlined required">
							</div>
							<div class="form-group">
								<label class="control-label">Password</label>
								<input type="password" id="password" name="Password" class="form-control underlined required">
							</div>
							<div class="form-group">
								<label class="control-label">Organization</label>
								<select class="form-control underlined required" id="organization" name="Organization" data-bind="options: Organizations,optionsText: 'Title', optionsValue: '_id'"></select>
							</div>
							<div class="form-group">
								<label class="control-label">Type</label>
								<select class="form-control underlined" id="type" name="Type">
									<option value="Admin">Admin</option>
									<option value="Employee">Employee</option>
									<option value="Customer">Customer</option>
								</select>
							</div>
							<div class="form-group">
								<button type="submit" id="submit" class="btn btn-primary validate">Submit</button>
							</div>
						</form>
					</div>
				</section>
			</article>
			<footer class="footer"></footer>
		</div>
	</div>
	<!-- Reference block for JS -->
	<div class="ref" id="ref">
		<div class="color-primary"></div>
		<div class="chart">
			<div class="color-primary"></div>
			<div class="color-secondary"></div>
		</div>
	</div>
	<script src="/admin/js/vendor.js"></script>
	<script src="/admin/js/app.js"></script>
	<script src="/admin/js/custom.js"></script>
	<script type="text/javascript">
		$(function () {
			Site.init();
			API.organizations(function (data) {
				ko.applyBindings({ Organizations:data }, document.getElementById('userform'));
			});

			$("#submit").click(function (e) {
				e.preventDefault();
				var valid = Site.validate($("#form"));
				if (valid) {
					var User = {
						Title: $("#title").val(),
						Email: $("#email").val(),
						Phone: $("#phone").val(),
						Type: $("#type").val(),
						Password: $("#password").val(),
						Organization: $("#organization").val()
					};

					API.createUser(User, function (data) {
						Site.redirect("/users/");
					});
				}
			});
		});
	</script>
</body>
</html>